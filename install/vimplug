#!/bin/sh

BASEDIR=$(dirname $0)
. $BASEDIR/inc/functions


curl --version 2>&1 > /dev/null
if [ $? -ne 0 ]; then
  echo "Could not find curl."
  exit 1
fi

wget --version 2>&1 > /dev/null
if [ $? -ne 0 ]; then
  echo "Could not find wget"
  exit 1
fi

if [ ! -e $HOME/.vim/autoload ]; then
  explain "Download Vim-plug (Vim plugins manager)"
  #git clone https://github.com/gmarik/vundle.git $HOME/.vim/bundle/vundle
  curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

if [ ! -e  ~/.vim/gutentags ]; then
  mkdir -p ~/.vim/gutentags
fi
if [ ! -e $HOME/.vim/spell ]; then
  explain "Spelling dictionary"
  mkdir -p ~/.vim/spell
  cd ~/.vim/spell
  wget http://ftp.vim.org/vim/runtime/spell/fr.latin1.spl
  wget http://ftp.vim.org/vim/runtime/spell/fr.latin1.sug
  wget http://ftp.vim.org/vim/runtime/spell/fr.utf-8.spl
  wget http://ftp.vim.org/vim/runtime/spell/fr.utf-8.sug
  wget http://ftp.vim.org/vim/runtime/spell/en.utf-8.sug
  wget http://ftp.vim.org/vim/runtime/spell/en.utf-8.spl
fi

explain "Vim plugins"
vim +PlugUpgrade +qa
vim +PlugInstall +qa
vim +PlugUpdate +qa
vim +PlugClean +qa

mkdir -p ~/.vimundo

