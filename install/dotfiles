#!/bin/sh

BASEDIR=$(dirname $0)
. $BASEDIR/inc/functions

ignoreRC="README.md|.gitignore|screenshot.png|LICENSE.md|dircolors|riot.txt|.notags|vimium|package.list|package_all.list|logouser.txt|settings_dataGrip.jar|LSP_settings.json|urlview|settings_idea.jar"
dir=~/dotfiles

explain "Create symlink for dotfiles"
# change to the dotfiles directory
cd $dir

files=`find . -maxdepth 1 -type f | sed 's|./||' | egrep -v $ignoreRC`

# create symlinks from the homedir to any files in the ~/dotfiles directory specified
for file in $files; do
  if [ -f ~/.$file ]; then
    tell rm ~/.$file
  fi
  tell ln -s $dir/$file ~/.$file
done

explain "Create symlink for files config"
mkdir ~/.vim
mkdir ~/.config/nvim
[ -d ~/.config/ ] || mkdir ~/.config/
tell cp -f --recursive --symbolic-link $dir/config/* ~/.config
tell cp -f --recursive --symbolic-link $dir/vim/* ~/.vim/
# tell cp -f --recursive --symbolic-link $dir/jupyter/* ~/.jupyter/

explain "Symlink nvim to vim"
tell ln -sf ~/.vim ~/.config/nvim
tell ln -sf ~/.vimrc ~/.config/nvim/init.vim

explain "Tmux italics"
cat <<EOF|tic -x -
tmux|tmux terminal multiplexer,
  sitm=\E[3m, ritm=\E[23m,
  smso=\E[7m, rmso=\E[27m,
  use=screen,

tmux-256color|tmux with 256 colors,
  sitm=\E[3m, ritm=\E[23m,
  smso=\E[7m, rmso=\E[27m,
  use=screen-256color,

xterm-256color|xterm with 256 colors and italic,
  sitm=\E[3m, ritm=\E[23m,
  use=xterm-256color,
EOF

explain "Git config"
git config github.user Drakirus
git config --global core.excludesfile ~/.gitignore
git config --global commit.template ~/.gitmessage


# tell cp -f --recursive --symbolic-link $dir/oh-my-zsh/* ~/.oh-my-zsh/
[ -d ~/.tmux-resurrect/ ] || git clone https://github.com/tmux-plugins/tmux-resurrect ~/.tmux-resurrect --depth=1

zsh
